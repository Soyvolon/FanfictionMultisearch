@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <div class="align-top">
        <button data-toggle="collapse" data-target="#advanced-serach">Advanced Search Options</button>
        <form method="post" class="form-group">
            <table class="search-item">
                <tr>
                    <th>Basic Search</th>
                </tr>
                <tr>
                    <td><input class="w-100 float-md-right" asp-for="BasicSearch" value="@Model.BasicSearch" /></td>
                </tr>
            </table>
            <table>
                <tr>
                    
                </tr>
            </table>
            <hr />
            <div id="advanced-serach" class="collapse">
                <table class="search-item">
                    <tr>
                        <th class="border-right mid-margin-left">
                            Title:
                        </th>
                        <th class="mid-margin-right">
                            Authors:
                        </th>
                    </tr>
                    <tr>
                        <td class="border-right mid-margin-left">
                            <textarea class="w-100 float-md-right" asp-for="TitleStr" value="@Model.TitleStr"></textarea>
                        </td>
                        <td class="mid-margin-right">
                            <textarea class="w-100 float-md-right" asp-for="AuthorStr" value="@Model.AuthorStr"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <th class="border-right mid-margin-left">
                            Characters:
                        </th>
                        <th class="mid-margin-right">
                            Relationships:
                        </th>
                    </tr>
                    <tr>
                        <td class="border-right mid-margin-left">
                            <textarea class="w-100 float-md-right " asp-for="CharacterStr" value="@Model.CharacterStr"></textarea>
                        </td>
                        <td class="mid-margin-right">
                            <textarea class="w-100 float-md-right" asp-for="RelationshipStr" value="@Model.RelationshipStr"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <th class="border-right mid-margin-left">
                            Fandoms:
                        </th>
                        <th class="mid-margin-right">
                            Other Tags:
                        </th>
                    </tr>
                    <tr>
                        <td class="border-right mid-margin-left">
                            <textarea class="w-100 float-md-right " asp-for="FandomsStr" value="@Model.FandomsStr"></textarea>
                        </td>
                        <td class="mid-margin-right">
                            <textarea class="w-100 float-md-right " asp-for="OtherTagsStr" value="@Model.OtherTagsStr"></textarea>
                        </td>
                    </tr>
                </table>
                <table class="search-item">
                    <tr class="text-center">
                        <th class="border-right mid-margin-left">
                            Likes:
                        </th>
                        <th class="border-right mid-margin-right mid-margin-left">
                            Views:
                        </th>
                        <th class="border-right mid-margin-right mid-margin-left">
                            Comments:
                        </th>
                        <th class="mid-margin-right">
                            Word Count:
                        </th>
                    </tr>
                    <tr>
                        <td class="border-right mid-margin-left">
                            <div class="w-100">Min: <input type="number" class="float-md-right" asp-for="LikesMin" value="@Model.LikesMin" /></div>
                        </td>
                        <td class="border-right mid-margin-right mid-margin-left">
                            <div class="w-100">Min: <input type="number" class="float-md-right" asp-for="ViewsMin" value="@Model.ViewsMin" /></div>
                        </td>
                        <td class="border-right mid-margin-right mid-margin-left">
                            <div class="w-100">Min: <input type="number" class="float-md-right" asp-for="CommentsMin" value="@Model.CommentsMin" /></div>
                        </td>
                        <td class="mid-margin-right">
                            <div class="w-100">Min: <input type="number" class="float-md-right" asp-for="WordCountMin" value="@Model.WordCountMin" /></div>
                        </td>
                    </tr>
                    <tr>
                        <td class="border-right mid-margin-left">
                            <div class="w-100">Max: <input type="number" class="float-md-right" asp-for="LikesMax" value="@Model.LikesMax" /></div>
                        </td>
                        <td class="border-right mid-margin-right mid-margin-left">
                            <div class="w-100">Max: <input type="number" class="float-md-right" asp-for="ViewsMax" value="@Model.ViewsMax" /></div>
                        </td>
                        <td class="border-right mid-margin-right mid-margin-left">
                            <div class="w-100">Max: <input type="number" class="float-md-right" asp-for="CommentsMax" value="@Model.CommentsMax" /></div>
                        </td>
                        <td class="mid-margin-right">
                            <div class="w-100">Max: <input type="number" class="float-md-right" asp-for="WordCountMax" value="@Model.WordCountMax" /></div>
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <th class="border-right mid-margin-left">
                            Updated Before:
                        </th>
                        <th class="mid-margin-right">
                            Published Before:
                        </th>
                    </tr>
                    <tr>
                        <td class="border-right mid-margin-left">

                        </td>
                        <td class="mid-margin-right">

                        </td>
                    </tr>
                </table>
            </div>
            <hr />
            <input class="w-100 position-sticky" id="TriggerSearch" type="submit" value="Search" />
        </form>
    </div>
    <div class="align-bottom">
        <table class="table table-bordered table-responsive-lg">
            <tr>
                <th>Search Results</th>
            </tr>
            @foreach (var i in Model.SearchManager.GetCurrentResults())
            {
                <tr>
                    <td>
                        <h3><a target="_blank" href="@i.Title.Item2">@i.Title.Item1</a> by <a target="_blank" href="@i.Author.Item2">@i.Author.Item1</a></h3>
                        <p>
                            <strong>Fandoms:</strong>

                            @foreach (var fandom in i.Fandoms)
                            {
                                if (fandom.Item2 != "")
                                {
                                    <a target="_blank" href="@fandom.Item2">@fandom.Item1, </a>
                                }
                                else
                                {
                                    <a>@fandom.Item1, </a>
                                }
                            }
                        </p>
                        <p>
                            <strong>Tags:</strong>

                            @foreach (var tag in i.Tags)
                            {
                                if (tag.Item2 != "")
                                {
                                    <a target="_blank" href="@tag.Item2">@tag.Item1, </a>
                                }
                                else
                                {
                                    <a>@tag.Item1, </a>
                                }
                            }
                        </p>
                        <hr />
                        <p>
                            @i.Description
                        </p>
                        <hr />
                        <p>
                            Likes: @i.Likes | Word Count: | Other Stuff: 
                        </p>
                    </td>
                </tr>
            }
        </table>
    </div>
</div>
